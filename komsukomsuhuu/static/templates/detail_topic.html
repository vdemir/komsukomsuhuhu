{% extends "base.html" %}

{% load gravatar %}

{% block css %}
{{ block.super }}
<link rel="stylesheet" href="/static/css/detail_topic.css"/>
<link rel="stylesheet" href="/static/css/topic_comment.css"/>
<!--<link rel="stylesheet" href="/static/css/bootstrap-theme.min.css"/>-->
<!--<script src="/static/js/topicbox.js"></script>-->
{% endblock %}

{% block js %}
{{ block.super }}
<script src="/static/js/topicbox.js"></script>>
{% endblock %}

{% block title %}Topic Detail{% endblock %}

{% block sidebarjs%}
<script>document.getElementById("topics").style.cssText = "color: #fff;background-color: #ffbb33;border-radius: 10px;";</script>
{% endblock %}


{% block content %}
{% if favorite_topic == "success" %}
<div class="col-md-5">
    <div class="main-content">
        <div class="span2 well">
            <b>You favorite topic successfully</b>
        </div>
    </div>
</div>
{% elif favorite_topic == "leave-success" %}
<div class="col-md-5">
    <div class="main-content">
        <div class="span2 well">
            <b>You unfavorite topic successfully</b>
        </div>
    </div>
</div>

{% elif favorite_topic == "no-members" %}
<div class="col-md-5">
    <div class="main-content">
        <div class="span2 well">
            <b>You are not member of this group</b>
        </div>
    </div>
</div>
{% endif %}
<div class="col-md-9">
    <div class="main-content">
        <form action="{% url 'new_post' topic.id %}" method="POST">
            {% csrf_token %}
            <div class="[ panel panel-default ] panel-google-plus">
                <div class="dropdown">
                            <span class="dropdown-toggle" type="button" data-toggle="dropdown">
                                <span class="[ glyphicon glyphicon-chevron-down ]"></span>
                            </span>

                    <ul class="dropdown-menu" role="menu">
                        {% if already_favorited %}
                        <li role="presentation"><a role="menuitem" tabindex="-1" href="{% url 'fav_topic' topic.id %}">Unfavourite
                            Topic</a></li>
                        {% else %}
                        <li role="presentation"><a role="menuitem" tabindex="-1" href="{% url 'fav_topic' topic.id %}">Favourite
                            Topic</a></li>
                        {% endif %}
                        <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Delete Topic</a></li>
                    </ul>
                </div>

                <div class="panel-heading">
                    <img class="[ img-circle pull-left ]" src="{% gravatar_url topic.owner.email 100 %}"
                         alt="Mouse0270"/>

                    <h3>{{ user.get_full_name }}</h3>
                    <h5><span>Shared publicly</span> - <span class="glyphicon glyphicon-calendar"></span><span>{{ topic.date_created }}</span>
                    </h5>

                    <h2>{{ topic.title }}</h2>
                </div>

                <div class="panel-body">
                    <p> {{ topic.content }}</p>
                </div>

                <div class="panel-footer">
                    <!--  <button type="button" class="[ btn btn-default ]">+1</button>
                      <button type="button" class="[ btn btn-default ]">
                          <span class="[ glyphicon glyphicon-share-alt ]"></span>
                      </button> -->
                    <div class="input-placeholder">Add a comment...</div>
                </div>

                <div class="panel-google-plus-comment">
                    <img class="img-circle" src="https://lh3.googleusercontent.com/uFp_tsTJboUY7kue5XAsGA=s46"
                         alt="User Image"/>

                    <div class="panel-google-plus-textarea">

                        <textarea type="text" name="content" rows="4"></textarea>
                        <button type="submit" value="Add Post" class="[ btn btn-success disabled ]">Post comment
                        </button>
                        <button type="reset" class="[ btn btn-default ]">Cancel</button>

                    </div>
                    <div class="clearfix"></div>
                </div>
            </div>

            <div class="qa-message-list" id="wallmessages">
                {% for post in posts %}
                <div class="message-item">
                    <div class="message-inner">
                        <div class="message-head clearfix">
                            <div class="avatar pull-left">
                                <a href="./index.php?qa=user&qa_1=amiya">
                                    <img src="{% gravatar_url post.owner.email 100 %}" alt=""
                                         class="img-responsive img-circle"/>
                                </a>
                            </div>
                            <div class="user-detail">

                                <h5 class="handle">{{ post.owner }}</h5>

                                <div class="post-meta">
                                    <div class="asker-meta">
                                        <span class="qa-message-what"></span>
                                        <span class="qa-message-when">
                                            <span class="qa-message-when-data1">
                                                <span class="glyphicon glyphicon-calendar"></span>{{ post.date_created }}</span>
                                        </span>
                                        <span class="qa-message-who">
                                            <span class="qa-message-who-pad">by </span>
                                            <span class="qa-message-who-data">
                                                <a href="./index.php?qa=user&qa_1=amiya">{{ post.owner}}</a>
                                            </span>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="qa-message-content">
                            {{ post.content }}
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </form>
    </div>
</div>

{% endblock %}
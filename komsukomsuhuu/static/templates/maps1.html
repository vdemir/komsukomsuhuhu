{% extends "base.html" %}

{% block css %}
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300,400' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="http://fontawesome.io/assets/font-awesome/css/font-awesome.css">
    <link rel="stylesheet" href="/static/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/static/css/home.css"/>
    <link rel="stylesheet" href="/static/css/navbar.css"/>
    <link rel="stylesheet" href="/static/css/postbox.css"/>
    <link rel="stylesheet" href="/static/css/side-navbar.css"/>
    <link rel="icon" href="/static/media/icon.png">
{% endblock %}

{% block js %}
<script src="/static/js/ie8-responsive-file-warning.js"></script>
<script src="/static/js/jquery.min.js"></script>
<script src="/static/js/bootstrap.min.js"></script>
<style text="text/javascript">
        html,body { margin:0; padding:0; height:100%; width:100%; }
        #map-canvas {width: 100%; height: 100%; }
</style>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js"></script>
    <script type="text/javascript">

    var map;
  function initialize() {
    var mapDiv = document.getElementById('map-canvas');
    map = new google.maps.Map(mapDiv, {
      center: new google.maps.LatLng(41.0053215,29.0121795),
      zoom: 12,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    google.maps.event.addListenerOnce(map, 'tilesloaded', addMarkers);

  }
  function addMarkers() {

      {% for mark in groups %}
        var point = new google.maps.LatLng({{mark.grouplocation.latitude}},{{mark.grouplocation.longitude}});
        var type= {{ mark.type }};
        var state= {{ mark.state }};
        if( type == 1){
            type="Public"
        }else {
            type="Private"
        }
        if( state == 1){
            state="Permanent"
        }else {
            state="Temporary"
        }

            var marker = new google.maps.Marker({
            position: point,
            map: map,
            title: '{{ mark.id }}'
        });
             marker['infowindow']  = new google.maps.InfoWindow({
                     content: "<h1>{{mark.name}}</h1> <br> Manager: {{ mark.manager }} <br> Type:"+type+"<br> State:"+state+" <p> <a href=\"detail_group\/{{ mark.id }}\"> Details</a>"
        });
            google.maps.event.addListener(marker, 'click', function() {
                //window.location.href = this.url;
                 this['infowindow'].open(map, this);
            });
           google.maps.event.addListener(marker, 'mouseover', function() {
                // this['infowindow'].open(map, this);
                    });
           google.maps.event.addListener(marker, 'mouseout', function() {
                // this['infowindow'].close(map, this);

            });





        {% endfor %}

  }


  google.maps.event.addDomListener(window, 'load', initialize);

    </script>
{% endblock %}

{% block title %}Maps{% endblock %}

{% block sidebarjs%}
<script>
    document.getElementById("maps").style.color="#fff";
    document.getElementById("maps").style.backgroundColor="#ffbb33";
    document.getElementById("maps").style.borderRadius="10px";
</script>
{% endblock %}

{% block content %}
<div id="map-canvas"></div>

{% endblock %}